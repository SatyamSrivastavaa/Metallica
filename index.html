<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <meta name="google-signin-client_id" content="944220023320-obo5bjhd8aah4bl62dj94tqvr1t01fne.apps.googleusercontent.com">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Metallica</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>
      html{
        width: 100%;
        height: 100%;
      }
      body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        font-family: sans-serif;
      }
      .profile p{margin: 0px 0px 10px 0px;}
      .head{margin-bottom: 0px;}
      .head a{float: right;}
      .profile img{width: 100px;float: left;margin: 0px 10px 10px 0px;}
      .proDetails{float: left;}
    </style>
    <script>
      function renderButton() {
        gapi.signin2.render('gSignIn', {
          'scope': 'profile email',
          'width': 240,
          'height': 50,
          'longtitle': true,
          'theme': 'dark',
          'onsuccess': onSuccess,
          'onfailure': onFailure
        });
      }
      function onSuccess(googleUser) {
        var profile = googleUser.getBasicProfile();
        gapi.client.load('plus', 'v1', function () {
          var request = gapi.client.plus.people.get({
            'userId': 'me'
          });
          // Display user details
          request.execute(function (resp) {
            console.log(resp)
            var profileHTML = '! <a href="javascript:void(0);" onClick="signOut();">Sign out</a></div>';
            profileHTML += '<img src="' + resp.image.url + '"/><div class="proDetails"><p>' + resp.displayName + '</p><p>' + '</p><p><a href="' + resp.url + '">View Google+ Profile</a></p></div></div>';
            $('.userContent').html(profileHTML);
            $('#gSignIn').slideUp('slow');
          });
        });
      }
      function onFailure(error) {
        alert(error);
      }
      function signOut() {
        var auth2 = gapi.auth2.getAuthInstance();
        auth2.signOut().then(function () {
          $('.userContent').html('');
          $('#gSignIn').slideDown('slow');
        });
      }
      function myFunction() {
        var x = document.getElementById("myTopnav");
        if (x.className === "topnav") {
          x.className += " responsive";
        } else {
          x.className = "topnav";
        }
      }
    </script>

    <script src="https://apis.google.com/js/client:platform.js?onload=renderButton" async defer></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- HTML for render Google Sign-In button -->
    <div id="gSignIn"></div>
  </head>
  <body>
    <div id="content"></div>
    <script src="/static/bundle.js"></script>
  </body>
</html>
